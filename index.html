<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!--Description-->
    
        <meta name="description" content="a site for studying">
    

    <!--Author-->
    
        <meta name="author" content="Cindy Xu">
    

    <!--Open Graph Title-->
    
        <meta property="og:title" content="CindyTech"/>
    

    <!--Open Graph Description-->
    
        <meta property="og:description" content="a site for studying" />
    

    <!--Open Graph Site Name-->
    <meta property="og:site_name" content="CindyTech"/>

    <!--Type page-->
    
        <meta property="og:type" content="website" />
    

    <!--Page Cover-->
    

    <meta name="twitter:card" content="summary" />
    

    <!-- Title -->
    
    <title>CindyTech</title>

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.2/css/bootstrap.min.css" integrity="sha384-y3tfxAZXuh4HwSYylfB+J125MxIs6mR5FOHamPBG064zB+AFeWH94NdvaCBm8qnd" crossorigin="anonymous">

    <!-- Custom Fonts -->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="//oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="//oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Gallery -->
    <link href="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.css" type="text/css" rel="stylesheet" />

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/style.css">

    <!-- Google Analytics -->
    


</head>


<body>

<div class="bg-gradient"></div>
<div class="bg-pattern"></div>

<!-- Menu -->
<!--Menu Links and Overlay-->
<div class="menu-bg">
    <div class="menu-container">
        <ul>
            
            <li class="menu-item">
                <a href="/">
                    Home
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/archives">
                    Archives
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/about.html">
                    About
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/contact.html">
                    Contact
                </a>
            </li>
            
        </ul>
    </div>
</div>

<!--Hamburger Icon-->
<nav>
    <a href="#menu"></a>
</nav>

<div class="container">

    <!-- Main Content -->
    <div class="row">
    <div class="col-sm-12">

        <!--Title and Logo-->
        <header>
    <div class="logo">
        <a href="/"><i class="logo-icon fa fa-cube" aria-hidden="true"></i></a>
        
            <h1 id="main-title" class="title">CindyTech</h1>
        
    </div>
</header>

        <section class="main">
            
                
<div class="post">

    <div class="post-header index">
        <h1 class="title">
            <a href="/2017/01/22/如何用Tensorflow来进行文本摘要/">
                如何用Tensorflow来进行文本摘要
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2017-01-22</span>
            
            
            
        </div>
    </div>

    
        <div class="content">
            <p>文本摘要问题有许多应用。如果你运营着一个网站，你可以用它为用户产生的内容创造标题和摘要；如果你想阅读一些文章，但是你又没有足够的时间，它可以为你总结这些文章中的主要观点。</p>
<p>文本摘要并不是一个容易的问题。有多种途径，包括各种监督和无监督算法。一些算法按文章中句子的重要性排序，然后从重要的句子中抽取出摘要，另外一些算法是端到端生成式模型。</p>
<p>端到端机器学习算法是有趣的尝试。毕竟，端到端算法在其他领域产生了好效果，如图像识别、语音识别、语言翻译、甚至问答系统等。</p>
<p><img src="/images/2TFstaticgraphic_alt-01.png" alt="[Image credit](https://research.googleblog.com/2015/11/computer-respond-to-this-email.html)"></p>
<h4 id="Tensorflow的文本摘要"><a href="#Tensorflow的文本摘要" class="headerlink" title="Tensorflow的文本摘要"></a>Tensorflow的文本摘要</h4><p>2016年8月，Peter Liu和Xin Pan这两位谷歌大脑团队的软件工程师发表了一篇名为<a href="https://research.googleblog.com/2016/08/text-summarization-with-tensorflow.html" target="_blank" rel="external">《Text summarization with TensorFlow》</a>的博客。他们的算法抽取文本中有趣的部分，并通过使用这部分文本生成摘要，而且能够重组词语使摘要的语法更正确。这种摘要的方法称为抽象摘要。</p>
<p>Peter和Xin用<a href="https://catalog.ldc.upenn.edu/LDC2012T21h" target="_blank" rel="external">Annotated English Gigaword</a>训练了一个文本摘要模型来为新文章产生标题。Annotated English Gigaword是经常被用做摘要研究的数据集，这个数据集包含了大约1000万文档。这个模型是用一个叫seq-to-seq学习的深度学习技术训练的。</p>
<p>训练和测试这个模型的<a href="https://github.com/tensorflow/models/tree/master/textsum" target="_blank" rel="external">代码</a>包含在TensorFlow Models所在的GitHub仓库中。它的核心模型是seq-to-seq模型。训练时，该模型用文章中的前两个句子作为输入，产生标题。</p>
<p>在解码时，这个算法用<a href="https://en.wikipedia.org/wiki/Beam_search" target="_blank" rel="external">beam search</a>从该模型产生的候选标题中找到一个最佳标题。</p>
<p>GitHub仓库没有提供训练好的模型。Annotated English Gigaword这个数据集不是开源的，非语言数据联盟成员的组织机构需要花费6000美元来获得授权。但是GitHub仓库包括一个玩具数据集，这个数据集足够来运行代码。</p>
<h4 id="怎样运行代码"><a href="#怎样运行代码" class="headerlink" title="怎样运行代码"></a>怎样运行代码</h4><p>训练模型需要事先安装TensorFlow和Bazel。</p>
<p>GitHub仓库中包含玩具数据集，这个数据集在data文件夹中包括两个文件：“data”和“vocab”。data包含一系列系列化tensorflow.core.example.example_pb2.Example对象。如下代码就可以生成这样格式的文件：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">import struct</div><div class="line">from tensorflow.core.example import example_pb2</div><div class="line"></div><div class="line">with open(output_filename, &apos;wb&apos;) as writer:</div><div class="line">  body = &apos;body&apos;</div><div class="line">  title = &apos;title&apos;</div><div class="line">    </div><div class="line">  tf_example = example_pb2.Example()</div><div class="line">  tf_example.features.feature[&apos;article&apos;].bytes_list.value.extend([body])</div><div class="line">  tf_example.features.feature[&apos;abstract&apos;].bytes_list.value.extend([title])</div><div class="line">  tf_example_str = tf_example.SerializeToString()</div><div class="line">  str_len = len(tf_example_str)</div><div class="line">  writer.write(struct.pack(&apos;q&apos;, str_len))</div><div class="line">  writer.write(struct.pack(&apos;%ds&apos; % str_len, tf_example_str))</div></pre></td></tr></table></figure></p>
<p>“vocab”文件时一个文本文件，里面是词语和词语的频次。每一行包含一个词、空格、词在数据集里发生的次数，这个词表用来向量化文本。</p>
<p>在玩具数据集上运行代码非常简单，<a href="https://github.com/tensorflow/models/tree/master/textsum" target="_blank" rel="external">这里</a>列出了运行训练和测试代码的一系列要求。</p>
<p>你也可以运行TensorBoard来监控训练进程：<br><img src="/images/1-68Qx8_lMwEwH-qbclGvUZg.png" alt=""></p>
<p>运行“decode”代码时，注意它会无限期循环数据集，所以你必须在某个时候手动停止进程。decoding的结果在“log_root/decode”文件夹里面，它包含一些文件，其中有一些有前缀“ref”，它们是测试集原来的标题；其他一些文件有前缀“decode”,是模型生成的标题。</p>
<h4 id="问题及解决"><a href="#问题及解决" class="headerlink" title="问题及解决"></a>问题及解决</h4><p>用TensorFlow 0.10或更高级的版本运行“eval”或“decode”时，你可能会遇到一个错误：<br>“ValueError: Could not flatten dictionary. Key had 2 elements, but value had 1 elements.”</p>
<p>针对这个问题，在 GitHub上有一个<a href="https://github.com/tensorflow/models/issues/417" target="_blank" rel="external">开放问题</a>。一个变通方案是降级TensorFlow到0.9，这个方法对我来说是有效的。另一个变通方案需要改变模型的代码：在seq2seq_attention_model.py中对LSTMCell进行实例化时增加“state_is_tuple=False”。</p>
<p>如果在玩具数据集上运行训练和解码，你会发现解码产生的标题是无意义的，这是一些产生的标题例子：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;UNK&gt; to &lt;UNK&gt; &lt;UNK&gt; &lt;UNK&gt; &lt;UNK&gt; &lt;UNK&gt; .</div><div class="line">&lt;UNK&gt; &lt;UNK&gt; &lt;UNK&gt; &lt;UNK&gt; of &lt;UNK&gt; &lt;UNK&gt; <span class="keyword">from</span> &lt;UNK&gt; &lt;UNK&gt; .</div><div class="line"><span class="keyword">in</span> <span class="keyword">in</span> &lt;UNK&gt; &lt;UNK&gt; &lt;UNK&gt; .</div></pre></td></tr></table></figure></p>
<p>在玩具数据集上效果这么差的一个原因可能是词汇文件不完整。词汇文件被截断，许多在“data”文件中用到的词没有包含进来。这导致有很多代表未知词的“<unk>”tokens。</unk></p>
<h4 id="怎样在其他数据集上运行"><a href="#怎样在其他数据集上运行" class="headerlink" title="怎样在其他数据集上运行"></a>怎样在其他数据集上运行</h4><p>玩具数据集嘛，就是，一个玩具。要训练一个有用的模型，你还要在一个大数据集上训练它。理想地说，数据集应该适应你的任务。新闻文章摘要可能跟法律文件或工作描述摘要不一样。</p>
<p>由于我对GigaWord数据集没有权限，所以我尝试在较小的新闻文章数据集上训练模型，这些新闻文章数据集是免费的：CNN和DailyMail。在GitHub仓库里我发现能够现在这些文章的代码<a href="https://github.com/deepmind/rc-data" target="_blank" rel="external">DeepMind/rcdata</a>,我稍微改动了一下，在每一个输出文件的开头一行增加了文章的标题。在<a href="https://gist.github.com/surmenok/2224ccfff5fbf24f3905b3da995668a3" target="_blank" rel="external">这里</a>看修改的代码。</p>
<p>CNN数据集有92570篇文章，Daily Mail数据集中有219503篇文章。本可以有更多的文章，但是DeepMind仓库的代码不能下载所有的URLs。322k的文章远比不上GigaWord中的百万篇文章，所以我对在这些数据上训练的模型的效果抱着更低的期望。</p>
<p>在执行代码下载数据集之后，会有一个包含很多文件的文件夹、一个HTML文件。要想在TextSum模型中用这些数据，你必须先要把她转化成上述描述的二进制格式。我的代码<a href="https://github.com/surmenok/TextSum/blob/master/textsum_data_convert.py" target="_blank" rel="external">textsum_data_convert.py</a>,在我的GitHub <a href="https://github.com/surmenok/TextSum" target="_blank" rel="external">TextSum</a>仓库中。用CNN数据集执行代码的例子如下：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">python textsum_data_convert.py \</div><div class="line">  --command text_to_vocabulary \</div><div class="line">  --in_directories cnn/stories \</div><div class="line">  --out_files cnn-vocab</div><div class="line"></div><div class="line">python textsum_data_convert.py \</div><div class="line">  --command text_to_binary \</div><div class="line">  --in_directories cnn/stories \</div><div class="line">  --out_files cnn-train.bin,cnn-validation.bin,cnn-test.bin \</div><div class="line">  --split <span class="number">0.8</span>,<span class="number">0.15</span>,<span class="number">0.05</span></div></pre></td></tr></table></figure></p>
<p>然后你可以把train/validation/test和词汇文件拷贝到“data”目录下，开始训练模型：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line">Train on CNN data (cnn-train, cnn-vocab):</div><div class="line"></div><div class="line">bazel-bin/textsum/seq2seq_attention \</div><div class="line">  --mode=train \</div><div class="line">  --article_key=article \</div><div class="line">  --abstract_key=abstract \</div><div class="line">  --data_path=data/cnn-train.bin \</div><div class="line">  --vocab_path=data/cnn-vocab.bin \</div><div class="line">  --log_root=log_root \</div><div class="line">  --train_dir=log_root/train \</div><div class="line">  --truncate_input=<span class="keyword">True</span></div><div class="line"></div><div class="line"></div><div class="line">Evaluate on CNN data (cnn-validation, cnn-vocab):</div><div class="line"></div><div class="line">bazel-bin/textsum/seq2seq_attention \</div><div class="line">  --mode=eval --article_key=article \</div><div class="line">  --abstract_key=abstract \</div><div class="line">  --data_path=data/cnn-validation.bin \</div><div class="line">  --vocab_path=data/cnn-vocab.bin \</div><div class="line">  --log_root=log_root \</div><div class="line">  --train_dir=log_root/eval \</div><div class="line">  --truncate_input=<span class="keyword">True</span></div><div class="line"></div><div class="line"></div><div class="line">Decode on CNN data (cnn-test, cnn-vocab):</div><div class="line"></div><div class="line">bazel-bin/textsum/seq2seq_attention \</div><div class="line">  --mode=decode \</div><div class="line">  --article_key=article \</div><div class="line">  --abstract_key=abstract \</div><div class="line">  --data_path=data/cnn-test.bin \</div><div class="line">  --vocab_path=data/cnn-vocab.bin \</div><div class="line">  --log_root=log_root \</div><div class="line">  --decode_dir=log_root/decode \</div><div class="line">  --beam_size=<span class="number">8</span> \</div><div class="line">  --truncate_input=<span class="keyword">True</span></div></pre></td></tr></table></figure></p>
<p>用默认参数训练不太好，这是running_avg_loss的图表：<br><img src="/images/1-xJfO98tlPPU_3QjgSORJ_A.png" alt=""></p>
<p>解码结果也很令人失望：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">“your your &lt;UNK&gt;”</div><div class="line">“We’ll the &lt;UNK&gt;”</div><div class="line">“snow hit hit hit &lt;UNK&gt;”</div></pre></td></tr></table></figure></p>
<p>或者是数据集太小，或者是这个数据集的超参数需要调整。</p>
<p>在执行代码时，尽管GeForce 980Ti,CUDA,CuDNN,TensorFlow这些我全都设置正确，我发现训练代码并没有用到GPU。在训练中python.exe消耗了100–300+% CPU，执行nvidia-smi显示GPU使用率停留在0%。<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">Thu Oct <span class="number">13</span> <span class="number">20</span>:<span class="number">14</span>:<span class="number">11</span> <span class="number">2016</span></div><div class="line">+------------------------------------------------------+</div><div class="line">| NVIDIA-SMI <span class="number">352.39</span>     Driver Version: <span class="number">352.39</span>         |</div><div class="line">|-------------------------------+----------------------+----------------------+</div><div class="line">| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |</div><div class="line">| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |</div><div class="line">|===============================+======================+======================|</div><div class="line">|   <span class="number">0</span>  GeForce GTX <span class="number">980</span> Ti  Off  | <span class="number">0000</span>:<span class="number">01</span>:<span class="number">00.0</span>     Off |                  N/A |</div><div class="line">| <span class="number">29</span>%   <span class="number">46</span>C    P8    <span class="number">26</span>W / <span class="number">250</span>W |    <span class="number">124</span>MiB /  <span class="number">6142</span>MiB |      <span class="number">0</span>%      Default |</div><div class="line">+-------------------------------+----------------------+----------------------+</div><div class="line"></div><div class="line">+-----------------------------------------------------------------------------+</div><div class="line">| Processes:                                                       GPU Memory |</div><div class="line">|  GPU       PID  Type  Process name                               Usage      |</div><div class="line">|=============================================================================|</div><div class="line">|    <span class="number">0</span>     <span class="number">17605</span>    C   /usr/bin/python                                <span class="number">102</span>MiB |</div><div class="line">+-----------------------------------------------------------------------------+</div></pre></td></tr></table></figure></p>
<p>我猜这可能跟模型的作者是在多GPU上运行代码有关，一个GPU有某种特别目的。seq2seq_attention_model.py文件的片段如下：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">_next_device</span><span class="params">(self)</span>:</span></div><div class="line">   <span class="string">"""Round robin the gpu device. (Reserve last gpu for expensive op)."""</span></div><div class="line">   <span class="keyword">if</span> self._num_gpus == <span class="number">0</span>:</div><div class="line">     <span class="keyword">return</span> <span class="string">''</span></div><div class="line">   dev = <span class="string">'/gpu:%d'</span> % self._cur_gpu</div><div class="line">   self._cur_gpu = (self._cur_gpu + <span class="number">1</span>) % (self._num_gpus<span class="number">-1</span>)</div><div class="line">   <span class="keyword">return</span> dev</div></pre></td></tr></table></figure></p>
<p>解码代码非常好地用了GPU，它消耗了几乎6Gb GPU内存，使用率保持在50%。<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">Sat Oct <span class="number">15</span> <span class="number">01</span>:<span class="number">51</span>:<span class="number">04</span> <span class="number">2016</span></div><div class="line">+------------------------------------------------------+</div><div class="line">| NVIDIA-SMI <span class="number">352.39</span>     Driver Version: <span class="number">352.39</span>         |</div><div class="line">|-------------------------------+----------------------+----------------------+</div><div class="line">| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |</div><div class="line">| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |</div><div class="line">|===============================+======================+======================|</div><div class="line">|   <span class="number">0</span>  GeForce GTX <span class="number">980</span> Ti  Off  | <span class="number">0000</span>:<span class="number">01</span>:<span class="number">00.0</span>     Off |                  N/A |</div><div class="line">| <span class="number">32</span>%   <span class="number">53</span>C    P2    <span class="number">96</span>W / <span class="number">250</span>W |   <span class="number">5881</span>MiB /  <span class="number">6142</span>MiB |     <span class="number">56</span>%      Default |</div><div class="line">+-------------------------------+----------------------+----------------------+</div><div class="line"></div><div class="line">+-----------------------------------------------------------------------------+</div><div class="line">| Processes:                                                       GPU Memory |</div><div class="line">|  GPU       PID  Type  Process name                               Usage      |</div><div class="line">|=============================================================================|</div><div class="line">|    <span class="number">0</span>      <span class="number">3020</span>    C   /usr/bin/python                               <span class="number">5858</span>MiB |</div><div class="line">+-----------------------------------------------------------------------------+</div></pre></td></tr></table></figure></p>
<h4 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h4><p>用文章中的代码你能够很容易地在自有的数据集上运行文本摘要模型。如果你有什么有趣的发现请通知我！</p>
<p>如果你碰巧有GigaWord数据集的授权，如果能跟我分享训练好的TensorFlow模型我会非常开心，我愿意把它用到一些私有数据上，而不是新闻文章。</p>
<p>你用过其他文本摘要的算法吗？什么算法效果最好？</p>
<p>这篇文章最初发表在<a href="http://pavel.surmenok.com/2016/10/15/how-to-run-text-summarization-with-tensorflow/" target="_blank" rel="external">http://pavel.surmenok.com/2016/10/15/how-to-run-text-summarization-with-tensorflow/</a>。</p>

        </div>
    

</div>
            
                
<div class="post">

    <div class="post-header index">
        <h1 class="title">
            <a href="/2017/01/22/升级ubuntu-server带来的坑/">
                升级ubuntu server带来的坑
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2017-01-22</span>
            
            
            
        </div>
    </div>

    
        <div class="content">
            <p>公司某人手贱，改动了ubuntu的引导，然后灾难来了，系统进不了了，各种报错，为了填这个坑，经历了九九八十一难，最终他成功了，但是却把14.04服务器版ubuntu升级到了16.04，然后我的灾难来了，cuda加速器不再好用，不知什么问题的我慌忙之中误把GTX1080显卡驱动卸载了，之后，就一直循环性的遇到一个问题：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">...</div><div class="line">Building initial module <span class="keyword">for</span> <span class="number">4.4</span><span class="number">.0</span><span class="number">-59</span>-generic</div><div class="line">ERROR: Cannot create report: [Errno <span class="number">17</span>] File exists: <span class="string">'/var/crash/virtualbox-dkms.0.crash'</span></div><div class="line">Error! Bad <span class="keyword">return</span> status <span class="keyword">for</span> module build on kernel: <span class="number">4.4</span><span class="number">.0</span><span class="number">-59</span>-generic (x86_64)</div><div class="line">...</div></pre></td></tr></table></figure></p>
<p>搜索了很久，才发现原来是GCC的问题，我重新安装了GCC，然后再安装GTX1080显卡驱动，重新安装cuda，cudnn,一切顺利。<br>回顾一下，现在也不知道这个问题的解决办法是什么原理。<br>虽然这个结果非常简单，但是却是一步步走过来的，中间各种法儿都试了，重装系统的心都有了，如果不是重装系统遇到了问题，就真的重装系统了。</p>

        </div>
    

</div>
            
                
<div class="post">

    <div class="post-header index">
        <h1 class="title">
            <a href="/2017/01/20/argparse/">
                argparse
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2017-01-20</span>
            
            
            
        </div>
    </div>

    
        <div class="content">
            <h4 id="在使用argparse的时候，如果参数的类型是bool类型，那么需要借助ast模块来检测传入的参数值是否是bool类型"><a href="#在使用argparse的时候，如果参数的类型是bool类型，那么需要借助ast模块来检测传入的参数值是否是bool类型" class="headerlink" title="在使用argparse的时候，如果参数的类型是bool类型，那么需要借助ast模块来检测传入的参数值是否是bool类型"></a>在使用argparse的时候，如果参数的类型是bool类型，那么需要借助ast模块来检测传入的参数值是否是bool类型</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">import argparse</div><div class="line">import ast</div><div class="line">parser = argparse.ArgumentParser()</div><div class="line">parser.add_argument(&quot;--burst&quot;, type=ast.literal_eval, dest=&quot;burst&quot;, </div><div class="line">help=&quot;for burst topic task&quot;)</div></pre></td></tr></table></figure>
        </div>
    

</div>
            
                
<div class="post">

    <div class="post-header index">
        <h1 class="title">
            <a href="/2017/01/19/linux命令记忆库/">
                linux命令记忆库
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2017-01-19</span>
            
            
            
        </div>
    </div>

    
        <div class="content">
            <h5 id="查看python在运行的脚本"><a href="#查看python在运行的脚本" class="headerlink" title="查看python在运行的脚本"></a>查看python在运行的脚本</h5><ul>
<li>ps aux | grep python</li>
</ul>
<h5 id="杀死进程"><a href="#杀死进程" class="headerlink" title="杀死进程"></a>杀死进程</h5><ul>
<li>kill PID  注：SIGTERM</li>
<li>kill -9 PID   注：SIGKILL  如果是进程树，采用此方式杀死</li>
</ul>
<h5 id="查看内存信息、CPU信息"><a href="#查看内存信息、CPU信息" class="headerlink" title="查看内存信息、CPU信息"></a>查看内存信息、CPU信息</h5><ul>
<li>cat /proc/meminfo </li>
<li>cat /proc/cpuinfo </li>
<li>grep MemTotal /proc/meminfo # 查看内存总量</li>
<li>grep MemFree /proc/meminfo # 查看空闲内存量</li>
</ul>
<h5 id="查看操作系统版本"><a href="#查看操作系统版本" class="headerlink" title="查看操作系统版本"></a>查看操作系统版本</h5><ul>
<li>head -n 1 /etc/issue</li>
</ul>
<h5 id="查看目录容量及使用情况"><a href="#查看目录容量及使用情况" class="headerlink" title="查看目录容量及使用情况"></a>查看目录容量及使用情况</h5><ul>
<li>df -h  # 查看各分区使用情况</li>
<li>du -sh &lt;目录名&gt; # 查看指定目录的大小</li>
<li>du -sh * # 查看当前目录下所有目录的大小</li>
</ul>
<h5 id="查看文件编码"><a href="#查看文件编码" class="headerlink" title="查看文件编码"></a>查看文件编码</h5><ul>
<li>在vim下使用:set fileencoding命令</li>
</ul>
<h5 id="设置时区"><a href="#设置时区" class="headerlink" title="设置时区"></a>设置时区</h5><ul>
<li>sudo cp /usr/share/zoneinfo/Asia/Shanghai /etc/localtime</li>
</ul>

        </div>
    

</div>
            
                
<div class="post">

    <div class="post-header index">
        <h1 class="title">
            <a href="/2017/01/19/test/">
                test
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2017-01-19</span>
            
            
            
        </div>
    </div>

    
        <div class="content">
            <h4 id="This-is-just-a-test"><a href="#This-is-just-a-test" class="headerlink" title="This is just a test."></a>This is just a test.</h4>
        </div>
    

</div>
            
                
<div class="post">

    <div class="post-header index">
        <h1 class="title">
            <a href="/2017/01/19/hello-world/">
                Hello World
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2017-01-19</span>
            
            
            
        </div>
    </div>

    
        <div class="content">
            <p>Welcome to <a href="https://hexo.io/" target="_blank" rel="external">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="external">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="external">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="external">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo new <span class="string">"My New Post"</span></div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="external">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo server</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="external">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo generate</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="external">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo deploy</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="external">Deployment</a></p>

        </div>
    

</div>
            
        </section>
    </div>
</div>






</div>

<!-- Footer -->
<div class="push"></div>

<footer class="footer-content">
    <div class="container">
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6 footer-about">
                <h2>About</h2>
                <p>
                    This theme was developed by <a href="https://github.com/klugjo">Jonathan Klughertz</a>. The source code is available on Github. Create Websites. Make Magic.
                </p>
            </div>
            
    <div class="col-xs-6 col-sm-6 col-md-3 col-lg-3 recent-posts">
        <h2>Recent Posts</h2>
        <ul>
            
            <li>
                <a class="footer-post" href="/2017/01/22/如何用Tensorflow来进行文本摘要/">如何用Tensorflow来进行文本摘要</a>
            </li>
            
            <li>
                <a class="footer-post" href="/2017/01/22/升级ubuntu-server带来的坑/">升级ubuntu server带来的坑</a>
            </li>
            
            <li>
                <a class="footer-post" href="/2017/01/20/argparse/">argparse</a>
            </li>
            
            <li>
                <a class="footer-post" href="/2017/01/19/linux命令记忆库/">linux命令记忆库</a>
            </li>
            
        </ul>
    </div>



            
        </div>
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                <ul class="list-inline footer-social-icons">
                    
                    <li class="list-inline-item">
                        <a href="https://github.com/klugjo/hexo-theme-alpha-dust">
                            <span class="footer-icon-container">
                                <i class="fa fa-github"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="https://twitter.com/?lang=en">
                            <span class="footer-icon-container">
                                <i class="fa fa-twitter"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="https://www.facebook.com/">
                            <span class="footer-icon-container">
                                <i class="fa fa-facebook"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="https://www.instagram.com/">
                            <span class="footer-icon-container">
                                <i class="fa fa-instagram"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="https://dribbble.com/">
                            <span class="footer-icon-container">
                                <i class="fa fa-dribbble"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="https://plus.google.com/">
                            <span class="footer-icon-container">
                                <i class="fa fa-google-plus"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="https://www.behance.net/">
                            <span class="footer-icon-container">
                                <i class="fa fa-behance"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="https://500px.com/">
                            <span class="footer-icon-container">
                                <i class="fa fa-500px"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="mailto:test@example.com">
                            <span class="footer-icon-container">
                                <i class="fa fa-envelope-o"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="\#">
                            <span class="footer-icon-container">
                                <i class="fa fa-rss"></i>
                            </span>
                        </a>
                    </li>
                    
                </ul>
            </div>
        </div>
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                <div class="footer-copyright">
                    @Untitled. All right reserved | Design & Hexo <a href="http://www.codeblocq.com/">Jonathan Klughertz</a>
                </div>
            </div>
        </div>
    </div>
</footer>

<!-- After footer scripts -->

<!-- jQuery -->
<script src="//code.jquery.com/jquery-2.1.4.min.js"></script>

<!-- Tween Max -->
<script src="//cdnjs.cloudflare.com/ajax/libs/gsap/1.18.5/TweenMax.min.js"></script>

<!-- Gallery -->
<script src="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.js" type="text/javascript" charset="utf-8"></script>

<!-- Custom JavaScript -->
<script src="/js/main.js"></script>

<!-- Disqus Comments -->



</body>

</html>